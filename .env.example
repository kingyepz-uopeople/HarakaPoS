# =====================================================
# HARAKAPOS ENVIRONMENT VARIABLES - HARAKA WEDGES SUPPLIES
# Copy this file to .env.local and fill in your values
# =====================================================

# Google Maps Keys
# Client-side (restrict by HTTP referrer)
NEXT_PUBLIC_GOOGLE_MAPS_KEY=your_browser_key
# Server-side (restrict by server IP)
Maps_SERVER_KEY=your_server_key

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# M-Pesa Daraja API Configuration
# Get these from: https://developer.safaricom.co.ke

# Environment: 'sandbox' for testing, 'production' for live
MPESA_ENVIRONMENT=sandbox

# Consumer Key and Secret (from Daraja Portal)
MPESA_CONSUMER_KEY=your_consumer_key_here
MPESA_CONSUMER_SECRET=your_consumer_secret_here

# ==============================================
# M-PESA SHORTCODE CONFIGURATION
# ==============================================
# You can use ONE shortcode for everything, OR separate Till and Paybill
# Recommended: Start with just ONE (Till Number is easier)
#
# OPTION A: Single Shortcode (Recommended for most businesses)
# Use one Till Number OR Paybill for all payments
MPESA_SHORTCODE=174379  # Sandbox: 174379 | Production: Your Till or Paybill number
MPESA_PASSKEY=bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919

# OPTION B: Separate Till and Paybill (DUAL SETUP - You chose this!)
# Uncomment ALL these lines when you get your Till and Paybill numbers:
# MPESA_TILL_NUMBER=512345              # Your Till Number (walk-in sales)
# MPESA_TILL_PASSKEY=your_till_passkey_from_daraja
# MPESA_PAYBILL_NUMBER=400200           # Your Paybill Number (deliveries)
# MPESA_PAYBILL_PASSKEY=your_paybill_passkey_from_daraja
# MPESA_USE_PAYBILL_FOR=delivery        # Use Paybill for 'delivery' context
#
# HOW IT WORKS:
# - Delivery orders → Uses PAYBILL (with order ID as account number)
# - Walk-in sales → Uses TILL (quick PDA payments)
# - Better tracking and reconciliation
# - Professional setup for scaling business
#
# IMPORTANT: You may need TWO sets of API credentials:
# If Till and Paybill are separate apps on Daraja portal, you'll need:
# MPESA_TILL_CONSUMER_KEY=...
# MPESA_TILL_CONSUMER_SECRET=...
# MPESA_PAYBILL_CONSUMER_KEY=...
# MPESA_PAYBILL_CONSUMER_SECRET=...
# (The system will use the main MPESA_CONSUMER_KEY if separate ones not provided)

# Callback URL (where M-Pesa sends payment results)
# Format: https://yourdomain.com/api/mpesa/callback
# For local testing, use ngrok: https://your-ngrok-url.ngrok.io/api/mpesa/callback
MPESA_CALLBACK_URL=https://yourdomain.com/api/mpesa/callback

# Business Name (for display only - actual name comes from Till/Paybill registration)
MPESA_BUSINESS_NAME="Haraka Wedges Supplies"

# =====================================================
# DUAL TILL & PAYBILL SETUP - YOUR CHOSEN STRATEGY
# =====================================================
#
# You're implementing BOTH Till and Paybill for maximum flexibility:
#
# TILL NUMBER (Walk-in Sales):
#   - Apply: Visit any Safaricom shop
#   - Documents: Business cert, KRA PIN, ID
#   - Cost: KES 500-1,000 (one-time)
#   - Timeline: 2-5 business days
#   - Use for: PDA terminal payments, walk-in customers
#   - Customer pays: Lipa na M-Pesa → Buy Goods → [Till Number]
#
# PAYBILL NUMBER (Deliveries):
#   - Apply: Through your bank OR Safaricom Business
#   - Documents: Business cert, KRA PIN, ID, bank account, bank statement
#   - Cost: KES 2,000-5,000 (one-time) + possible monthly fee
#   - Timeline: 1-3 weeks
#   - Use for: Delivery orders, remote payments, order tracking
#   - Customer pays: Lipa na M-Pesa → Pay Bill → [Paybill] → Account: [Order ID]
#
# BENEFITS OF DUAL SETUP:
#   ✅ Separate revenue tracking (walk-in vs delivery)
#   ✅ Better reconciliation and reporting
#   ✅ Professional image for both channels
#   ✅ Account number tracking for deliveries (order IDs)
#   ✅ Scalable for multiple locations
#   ✅ Redundancy (if one is down, use the other)
#
# See docs/DUAL_TILL_PAYBILL_SETUP.md for complete setup guide!
#
# =====================================================
# BUSINESS NAME SETUP - IMPORTANT!
# =====================================================
#
# To show "Haraka Wedges Supplies" on customer's STK push:
#
# OPTION 1: M-Pesa Till Number (For walk-in) ⭐
#   - Apply: https://www.safaricom.co.ke/personal/m-pesa/lipa-na-mpesa
#   - Requirements: Business registration docs, KRA PIN, ID copy
#   - Cost: KES 500-1,000 one-time fee
#   - Timeline: 2-5 business days
#   - Your business name will show on all STK push requests
#   - You get a Till Number (e.g., 512345) to use as MPESA_TILL_NUMBER
#
# OPTION 2: M-Pesa Paybill (For deliveries) ⭐
#   - More features than Till Number
#   - Higher requirements (business account, etc.)
#   - Apply through your bank or Safaricom Business
#   - Cost: KES 2,000-5,000 setup + possible monthly fee
#   - Timeline: 1-3 weeks
#   - Supports account numbers (order tracking)
#   - You get a Paybill Number (e.g., 400200) to use as MPESA_PAYBILL_NUMBER
#
# OPTION 3: Use Payment Aggregator (Alternative)
#   Services: Pesapal, Flutterwave, Intasend, DPO Pay
#   - No Till/Paybill needed
#   - Your business name shows correctly
#   - Faster setup (1-2 days)
#   - Small fee: 2-3% per transaction
#   - They handle all M-Pesa integration
#
# OPTION 4: Sandbox Testing (Current - FREE)
#   - Business name shows as "Test Business" or "Safaricom"
#   - Good for development only
#   - Use test credentials below
#
# =====================================================
# SETUP INSTRUCTIONS
# =====================================================
#
# 1. SUPABASE SETUP:
#    - Go to https://supabase.com/dashboard
#    - Copy your project URL and anon key
#    - Paste above
#
# 2. M-PESA SANDBOX SETUP (for testing - START HERE):
#    - Go to https://developer.safaricom.co.ke
#    - Create an account and login
#    - Create a new app
#    - Select "Lipa Na M-Pesa Online" API
#    - Copy Consumer Key and Consumer Secret
#    - Use test credentials:
#      * Consumer Key: (from your app)
#      * Consumer Secret: (from your app)
#      * Shortcode: 174379 (sandbox test shortcode)
#      * Passkey: bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919
#    - For callback URL during local testing:
#      * Install ngrok: npm install -g ngrok
#      * Run: ngrok http 3000
#      * Copy the https URL (e.g., https://abc123.ngrok.io)
#      * Add /api/mpesa/callback to it
#      * Update MPESA_CALLBACK_URL above
#
# 3. M-PESA PRODUCTION SETUP (when ready to go live):
#    - Apply for Till Number (Option 1 above) OR use aggregator (Option 3)
#    - Get production credentials from Daraja portal
#    - Update MPESA_ENVIRONMENT to 'production'
#    - Update MPESA_SHORTCODE to your Till/Paybill number
#    - Update MPESA_PASSKEY with your production passkey
#    - Update MPESA_CALLBACK_URL to your live domain
#    - Your business name "Haraka Wedges Supplies" will now show!
#
# 4. TEST PHONE NUMBERS (Sandbox only):
#    - 254708374149
#    - 254708374150
#    - 254711XXXXXX (any Safaricom number works in sandbox)
#    - These will receive test STK push prompts
#    - No actual money is transferred in sandbox
#
# 5. NGROK SETUP (for local callback testing):
#    npm install -g ngrok
#    ngrok http 3000
#    # Copy the https URL shown (e.g., https://abc123.ngrok-free.app)
#    # Update MPESA_CALLBACK_URL to: https://abc123.ngrok-free.app/api/mpesa/callback
#
# =====================================================
